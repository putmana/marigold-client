import{S as K,i as Q,s as V,A as E,B as q,h as A,C as z,w as _,x as h,f as D,l as T,z as b,o as k,p as g,q as $,y as d,a as F,g as H,D as I,E as L,F as R,n as Z}from"../chunks/index.fabf1593.js";import{D as j}from"../chunks/deck.1807290b.js";import{T as y,a as G}from"../chunks/track-item.c99746c3.js";import{V as U}from"../chunks/void.9408c301.js";import{U as J}from"../chunks/mg.config.c6f47e45.js";import{a as M}from"../chunks/api-albums.43728327.js";import{b as W}from"../chunks/palette.1f7ca4c4.js";import{q as v,s as X,a as Y}from"../chunks/player.6751a396.js";import{f as N,s as P}from"../chunks/utils.28887bd2.js";import{t as S}from"../chunks/auth.cb11a4f9.js";import{d as B}from"../chunks/colors.63b2af4a.js";function C(r,e,o){const t=r.slice();return t[10]=e[o],t[12]=o,t}function x(r){let e,o;return e=new U({props:{text:r[13]}}),{c(){k(e.$$.fragment)},l(t){g(e.$$.fragment,t)},m(t,n){$(e,t,n),o=!0},p(t,n){const a={};n&1&&(a.text=t[13]),e.$set(a)},i(t){o||(_(e.$$.fragment,t),o=!0)},o(t){h(e.$$.fragment,t),o=!1},d(t){d(e,t)}}}function ee(r){let e,o;return e=new j({props:{$$slots:{default:[te]},$$scope:{ctx:r}}}),{c(){k(e.$$.fragment)},l(t){g(e.$$.fragment,t)},m(t,n){$(e,t,n),o=!0},p(t,n){const a={};n&16385&&(a.$$scope={dirty:n,ctx:t}),e.$set(a)},i(t){o||(_(e.$$.fragment,t),o=!0)},o(t){h(e.$$.fragment,t),o=!1},d(t){d(e,t)}}}function O(r){let e,o;function t(){return r[6](r[0],r[12])}function n(){return r[7](r[10])}return e=new G({props:{track:r[10],position:r[12]+1,showArt:!1}}),e.$on("queuethislist",t),e.$on("queuethistrack",n),{c(){k(e.$$.fragment)},l(a){g(e.$$.fragment,a)},m(a,c){$(e,a,c),o=!0},p(a,c){r=a;const i={};c&1&&(i.track=r[10]),e.$set(i)},i(a){o||(_(e.$$.fragment,a),o=!0)},o(a){h(e.$$.fragment,a),o=!1},d(a){d(e,a)}}}function te(r){let e,o,t,n;function a(){return r[5](r[0])}e=new y({props:{id:r[0].info.id,title:r[0].info.title,artists:N(r[0].info.artists),category:r[0].info.category,count:r[0].tracks.length,duration:P(r[0].tracks),cover:r[0].info.cover.path}}),e.$on("queuethislist",a);let c=r[0].tracks,i=[];for(let s=0;s<c.length;s+=1)i[s]=O(C(r,c,s));const p=s=>h(i[s],1,1,()=>{i[s]=null});return{c(){k(e.$$.fragment),o=F();for(let s=0;s<i.length;s+=1)i[s].c();t=q()},l(s){g(e.$$.fragment,s),o=H(s);for(let l=0;l<i.length;l+=1)i[l].l(s);t=q()},m(s,l){$(e,s,l),A(s,o,l);for(let m=0;m<i.length;m+=1)i[m]&&i[m].m(s,l);A(s,t,l),n=!0},p(s,l){r=s;const m={};if(l&1&&(m.id=r[0].info.id),l&1&&(m.title=r[0].info.title),l&1&&(m.artists=N(r[0].info.artists)),l&1&&(m.category=r[0].info.category),l&1&&(m.count=r[0].tracks.length),l&1&&(m.duration=P(r[0].tracks)),l&1&&(m.cover=r[0].info.cover.path),e.$set(m),l&7){c=r[0].tracks;let f;for(f=0;f<c.length;f+=1){const u=C(r,c,f);i[f]?(i[f].p(u,l),_(i[f],1)):(i[f]=O(u),i[f].c(),_(i[f],1),i[f].m(t.parentNode,t))}for(I(),f=c.length;f<i.length;f+=1)p(f);L()}},i(s){if(!n){_(e.$$.fragment,s);for(let l=0;l<c.length;l+=1)_(i[l]);n=!0}},o(s){h(e.$$.fragment,s),i=i.filter(Boolean);for(let l=0;l<i.length;l+=1)h(i[l]);n=!1},d(s){d(e,s),s&&D(o),R(i,s),s&&D(t)}}}function re(r){let e,o;return e=new U({props:{text:"loading..."}}),{c(){k(e.$$.fragment)},l(t){g(e.$$.fragment,t)},m(t,n){$(e,t,n),o=!0},p:Z,i(t){o||(_(e.$$.fragment,t),o=!0)},o(t){h(e.$$.fragment,t),o=!1},d(t){d(e,t)}}}function ne(r){let e,o,t,n={ctx:r,current:null,token:null,hasCatch:!0,pending:re,then:ee,catch:x,value:0,error:13,blocks:[,,,]};return E(o=r[0],n),{c(){e=q(),n.block.c()},l(a){e=q(),n.block.l(a)},m(a,c){A(a,e,c),n.block.m(a,n.anchor=c),n.mount=()=>e.parentNode,n.anchor=e,t=!0},p(a,[c]){r=a,n.ctx=r,c&1&&o!==(o=r[0])&&E(o,n)||z(n,r,c)},i(a){t||(_(n.block),t=!0)},o(a){for(let c=0;c<3;c+=1){const i=n.blocks[c];h(i)}t=!1},d(a){a&&D(e),n.block.d(a),n.token=null,n=null}}}function oe(r,e,o){let t,n,a,c;T(r,v,u=>o(8,n=u)),T(r,S,u=>o(4,a=u)),T(r,B,u=>o(9,c=u));let{data:i}=e;function p(u,w){b(v,n=X(u,w),n)}function s(u){b(v,n=Y([u]),n)}const l=u=>{p(u.tracks,0)},m=(u,w)=>p(u.tracks,w),f=u=>s(u);return r.$$set=u=>{"data"in u&&o(3,i=u.data)},r.$$.update=()=>{r.$$.dirty&24&&o(0,t=M(a,i.id).then(u=>(b(B,c=W(u.info.cover.color),c),u)).catch(u=>{throw u.message==="BAD TOKEN"&&b(S,a=J,a),new Error(u)}))},[t,p,s,i,a,l,m,f]}class ke extends K{constructor(e){super(),Q(this,e,oe,ne,V,{data:3})}}export{ke as default};
